<%@page import="modelos.Mensaje"%>
<%@page import="java.util.List"%>
<%@page import="bd.Conexion"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%
    
    HttpSession sesion = request.getSession();
    
    if(sesion.getAttribute("administrador") == null){
        response.sendRedirect("iniciarSesion.jsp");
    }
    else{
        Conexion conexion = new Conexion();
        int id = Integer.parseInt(request.getParameter("id"));
        
        List<Mensaje> listaMensaje = conexion.mostrarMensajes(id);
%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Mostrar mensajes</title>
        <link rel="stylesheet" href="css/mostrarMensajes.css">
    </head>
    <body>        
       
        <h1 style="text-align: center;">Mensajes</h1>
        <%
        
            for(int i = 0; i<listaMensaje.size(); i++){
        %>
        <div class="tarjeta-mensaje">
            <div class="nombre-mensaje">
                <h3>Nombre: </h3>
                <%= conexion.obtenerNombreUsuario(listaMensaje.get(i).getIdUsuario())%>
            </div>
            <br>
            <div class="contenido-mensaje">
                <h3>Mensaje: </h3>
                <%= listaMensaje.get(i).getMensaje()%>
            </div>
            <br>
            <div class="contenido-borrar">
                <a href="BorrarMensaje?idMensaje=<%=listaMensaje.get(i).getId()%>&id=<%=id%>" class="borrar">Borrar</a>
                <a href="responderUsuario.jsp?id=<%=id%>&idMensaje=<%= listaMensaje.get(i).getId()%>" class="responder">Responder</a>
            </div>
            <br>
        </div>
        <br>
        <br>
        <%}%>

        <div style="text-align: center;">
            <a href="mostrarUsuarios.jsp" class="volver">Volver</a>
        </div>
        <br><br>
    </body>
</html>
<%}%>
